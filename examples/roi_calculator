// RiyalScript Example: Return on Investment Calculator
// This program demonstrates financial calculations in RiyalScript

// Function to calculate ROI percentage
function calculateROI<[principal: Currency, finalValue: Currency]> {
  // Ensure both values are in the same currency
  let gain = finalValue - principal
  let roiPercentage = (gain / principal) * 100
  yield roiPercentage
}

// Function to calculate compound annual growth rate
function calculateCAGR<[initial: Currency, final: Currency, years: number]> {
  let ratio = final / initial
  let cagr = (pow<[ratio, 1 / years]> - 1) * 100
  yield cagr
}

// Main program
print<["=== Investment Analysis Tool ==="]>
print<[]>

// Define investment parameters
let initialInvestment: Currency = 10000 USD
let currentValue: Currency = 15750 USD
let investmentPeriod: number = 3  // years

// Calculate returns
let roi = calculateROI<[initialInvestment, currentValue]>
let cagr = calculateCAGR<[initialInvestment, currentValue, investmentPeriod]>
let totalGain = currentValue - initialInvestment

// Display results
print<["Initial Investment:", initialInvestment]>
print<["Current Value:", currentValue]>
print<["Investment Period:", investmentPeriod, "years"]>
print<[]>
print<["Results:"]>
print<["  Total Gain:", totalGain]>
print<["  ROI:", roi, "%"]>
print<["  CAGR:", cagr, "%"]>

// Risk assessment using audit
audit roi > 0 {
  print<[]>
  print<["âœ“ Investment is profitable"]>
}

// Investment recommendation
if (cagr > 15) {
  print<["Recommendation: EXCELLENT - Outperforming market"]>
} else if (cagr > 8) {
  print<["Recommendation: GOOD - Meeting expectations"]>
} else if (cagr > 0) {
  print<["Recommendation: FAIR - Consider alternatives"]>
} else {
  print<["Recommendation: POOR - Review investment strategy"]>
}

// Simulate a trade based on performance
if (roi > 50) {
  print<[]>
  print<["Executing profit-taking trade..."]>
  trade<["PORTFOLIO", 25, "SELL"]>  // Sell 25% to take profits
}